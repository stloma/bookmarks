{"version":3,"sources":["../../../src/server/scripts/favicon.js"],"names":["download","url","id","callback","encoding","followRedirect","timeout","maxRedirect","err","res","body","statusCode","writeFile","join","__dirname"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AAEO,IAAMA,8BAAW,SAAXA,QAAW,CAAUC,GAAV,EAAeC,EAAf,EAAmBC,QAAnB,EAA6B;AACnD,yBAAQ;AACNF,SAAKA,MAAM,cADL;AAENG,cAAU,IAFJ;AAGNC,oBAAgB,IAHV;AAINC,aAAS,IAJH;AAKNC,iBAAa;AALP,GAAR,EAMG,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC3B,QAAIF,GAAJ,EAAS;AACPL,eAASK,GAAT;AACD,KAFD,MAEO,IAAIC,IAAIE,UAAJ,KAAmB,GAAvB,EAA4B;AACjC,mBAAGC,SAAH,CACE,eAAKC,IAAL,CAAUC,SAAV,qCAAsDZ,EAAtD,UADF,EACmEQ,IADnE,EACyE,UAAUF,GAAV,EAAe;AACpF,YAAIA,GAAJ,EAAS;AACPL,mBAASK,GAAT;AACD;AACDL,iBAAS,IAAT,EAAeM,IAAIE,UAAnB;AACD,OANH;AAOD,KARM,MAQA;AACLR,eAAS,IAAT,EAAeM,IAAIE,UAAnB;AACD;AACF,GApBD;AAqBD,CAtBM","file":"favicon.js","sourcesContent":["import request from 'request'\nimport path from 'path'\nimport fs from 'fs'\n\nexport const download = function (url, id, callback) {\n  request({\n    url: url + '/favicon.ico',\n    encoding: null,\n    followRedirect: true,\n    timeout: 5000,\n    maxRedirect: 5\n  }, function (err, res, body) {\n    if (err) {\n      callback(err)\n    } else if (res.statusCode === 200) {\n      fs.writeFile(\n        path.join(__dirname, `../../../dist/images/favicons/${id}.ico`), body, function (err) {\n          if (err) {\n            callback(err)\n          }\n          callback(null, res.statusCode)\n        })\n    } else {\n      callback(null, res.statusCode)\n    }\n  })\n}\n"]}