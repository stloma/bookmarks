{"version":3,"sources":["../../../src/server/scripts/favicon.js"],"names":["download","url","id","options","uri","encoding","followRedirect","timeout","maxRedirect","then","outputFile","join","__dirname","result","catch","error"],"mappings":";;;;;QAIgBA,Q,GAAAA,Q;;AAJhB;;;;AACA;;;;AACA;;;;;;AAEO,SAASA,QAAT,CAAmBC,GAAnB,EAAwBC,EAAxB,EAA4B;AACjC,MAAMC,UAAU;AACdC,SAAQH,GAAR,iBADc;AAEdI,cAAU,IAFI;AAGdC,oBAAgB,IAHF;AAIdC,aAAS,IAJK;AAKdC,iBAAa;AALC,GAAhB;;AAQA,SAAO,8BAAGL,OAAH,EACJM,IADI,CACC;AAAA,WAAU,kBAAGC,UAAH,CAAc,eAAKC,IAAL,CAAUC,SAAV,qCAAsDV,EAAtD,UAAd,EAA+EW,MAA/E,CAAV;AAAA,GADD,EAEJJ,IAFI,CAEC;AAAA,WAAM,GAAN;AAAA,GAFD,EAGJK,KAHI,CAGE;AAAA,WAASC,KAAT;AAAA,GAHF,CAAP;AAID;;AAEG;;;;;;;;;;;;AAYE","file":"favicon.js","sourcesContent":["import rp from 'request-promise'\nimport path from 'path'\nimport fs from 'fs-extra'\n\nexport function download (url, id) {\n  const options = {\n    uri: `${url}/favicon.ico`,\n    encoding: null,\n    followRedirect: true,\n    timeout: 5000,\n    maxRedirect: 5\n  }\n\n  return rp(options)\n    .then(result => fs.outputFile(path.join(__dirname, `../../../dist/images/favicons/${id}.ico`), result))\n    .then(() => 200)\n    .catch(error => error)\n}\n\n    /*\n  return rp(options)\n    .then(result => {\n      return Promise.all([\n        result,\n        fs.outputFile(path.join(__dirname, `../../../dist/images/favicons/${id}.ico`), result)\n      ])\n    })\n    .then(result => result)\n    .catch(error => console.log(error))\n}\n*/\n      /*\n  request({\n    url: url + '/favicon.ico',\n    encoding: null,\n    followRedirect: true,\n    timeout: 5000,\n    maxRedirect: 5\n  }, function (err, res, body) {\n    if (err) {\n      callback(err)\n    } else if (res.statusCode === 200) {\n      fs.writeFile(\n        path.join(__dirname, `../../../dist/images/favicons/${id}.ico`), body, function (err) {\n          if (err) {\n            callback(err)\n          }\n          callback(null, res.statusCode)\n        })\n    } else {\n      callback(null, res.statusCode)\n    }\n  })\n  */\n"]}